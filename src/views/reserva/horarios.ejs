<% include ../partials/_header %>
    <% include ../partials/_navigation %>
        <% include ../partials/_message %> 
            <div class="container mt-5"> 
            <div class="card mb-3">
                    <div class="card-header">
                      Horarios</div>
                    <div class="card-body">
                      <div class="table-responsive">
                        <table class="table table-striped table-bordered" id="dataTable" width="100%" cellspacing="0">
                          <thead>
                            <tr>
                              <th>ID cancha</th>
                              <th>Deporte</th>
                              <th>Precio base</th>
                              <th>Fecha</th>
                              <th>Hora inicio</th>
                              <th>Hora termino</th>
                              <th>Acciones</th>
                            </tr>
                          </thead>
                          <tfoot>
                            <tr>
                                <th>ID cancha</th>
                                <th>Deporte</th>
                                <th>Precio base</th>
                                <th>Fecha</th>
                                <th>Hora inicio</th>
                                <th>Hora termino</th>
                                <th>Acciones</th>
                            </tr>
                          </tfoot>
                          <tbody>
                            <% if(horario){ %>
                                <% for (var i=0; i < horario.length; i++){ %>  
                            <tr>
                                <td>
                                        <%= horario[i].id  %>
                                </td>
                                <td>
                                        <%= horario[i].deporte  %>
                                </td>
                                <td>
                                        <%= horario[i].precio_base  %>
                                </td>
                                <td>
                                        <%= fecha  %>
                                </td>
                                <td>
                                        <%= horario[i].hora_inicio  %>
                                </td>
                                <td>
                                        <%= horario[i].hora_termino  %>
                                </td>
                                <td>
                                        <button class=" btn btn-success">Reservar</button>
                                </td>
                            </tr>
                            <%} %>
                        <%} %>
                          </tbody>
                        </table>
                      </div>
                    </div>
                </div>                          
            <script>
                $(document).ready(function () {
                    $('#dataTable').DataTable({
                        "searching": false,
                        "ordering": false,
                        "lengthChange": false,
                        "info": false
                    });
                });

                $(".btn").click(function() {
                  var all = [];
                    $(this).closest('tr').find('td').not(':last').each(function() {
                      var textval = $(this).text(); // this will be the text of each <td>
                      all.push(textval);
                  });
                  console.log(all);

                //   $.ajax({
                //   url: '/reserva/horarios',
                //   type: 'POST',
                //   contentType: 'application/json',
                //   data: JSON.stringify({"all": all}),
                //   success: function(response){ console.log( response ); }
                // });
                });  
            </script>
            <% include ../partials/_footer %>